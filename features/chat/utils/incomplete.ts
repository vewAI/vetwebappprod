export const INCOMPLETE_MARKERS = new Set<string>([
  // Articles
  "the",
  "a",
  "an",
  // Prepositions
  "of",
  "at",
  "in",
  "on",
  "for",
  "with",
  "by",
  "from",
  "about",
  "into",
  "through",
  "during",
  "before",
  "after",
  "above",
  "below",
  "between",
  "under",
  "over",
  // Conjunctions
  "and",
  "or",
  "but",
  "so",
  "yet",
  "nor",
  // Removed "is", "to", "do" per request
  // Verb continuations
  "are",
  "was",
  "were",
  "be",
  "been",
  "being",
  "has",
  "had",
  // "do", - removed per request
  "does",
  "did",
  "will",
  "would",
  "could",
  "should",
  "may",
  "might",
  "must",
  "shall",
  "can",
  // Interrogatives & pronouns
  "that",
  "which",
  "who",
  "whom",
  "whose",
  "what",
  "where",
  "when",
  "why",
  "how",
  "if",
  "then",
  "because",
  "although",
  "while",
  "unless",
  "until",
  "since",
  "i",
  "he",
  "she",
  "they",
  "it",
  "we",
  "my",
  "your",
  "his",
  "her",
  "its",
  "our",
  "their",
  "this",
  "these",
  "those",
  // filler / modal continuers
  "very",
  "really",
  "just",
  "also",
  "even",
  "still",
  "already",
  "always",
  "never",
  "often",
  "usually",
  "sometimes",
  "not",
  "no",
  "any",
  "some",
  "all",
  "each",
  "every",
  "both",
  "either",
  "neither",
]);

export function endsWithIncompleteMarker(text: string): boolean {
  if (!text) return false;
  const lastWord = String(text).trim().split(/\s+/).pop()?.toLowerCase() ?? "";
  return INCOMPLETE_MARKERS.has(lastWord);
}
